#include <ESP8266WiFi.h>
#include <ESP8266HTTPClient.h>

const char* ssid = "********";
const char* password = "********";

const char* node_ip = "xxx.xxx.xxx.xxx";
const char* state =  strcat(node_ip, ":5005/state");
const char* pause = strcat(node_ip, ":5005/pauseall");
const char* play = strcat(node_ip, ":5005/resumeall")

const char* buttonInput = "D0";
boolean isPressed = false;

void setup () {

	pinMode(buttonInput, INPUT); // set the button to function as input
	digitalWrite(buttonInput, HIGH);
	
	Serial.begin(115200);
	WiFi.begin(ssid, password);
	
	Serial.print("Connecting...");
	while (WiFi.status() != WL_CONNECTED) {
		delay(3000);
		Serial.print(".");
	}
}

void loop() {
	
	isPressed = digitalRead(buttonInput);
	
	if (isPausedPressed) {
		if (WiFi.status() == WL_CONNECTED) {
			HTTPClient http;
						
			
			
			/* TO DO:
			1) Make HTTP request to get state of Sonos speakers
			2) Extract JSON key:value for standby state (playing/pause?)
			
			*/
			http.begin(state); // Get state of Sonos speakers
			
			int httpCode = http.GET();
			if (httpCode == 200) {
				Serial.println("Success");
			}
			http.end();
		}
	}
}